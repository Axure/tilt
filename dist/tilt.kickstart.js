// Tilt v1.0.0 - A micro script that simulates touch feedback on HTML elements.
// Copyright (c) 2015 Rik Schennink - http://rikschennink.github.io/tilt/
// License: MIT - http://www.opensource.org/licenses/mit-license.php
!function(t,e,n){"undefined"!=typeof module&&module.exports?module.exports=e(t):"function"==typeof define&&define.amd?define(e(t)):t.Tile=e(t)}(this,function(t,e){"use strict";function n(t,e){return t.hasOwnProperty(e)}function i(t,e){return-1!==e.indexOf(t.type)}function o(t,e,n){e.forEach(function(e){t.addEventListener(e,n,!1)})}function r(t,e,n){e.forEach(function(e){t.removeEventListener(e,n,!1)})}function a(t){return 0===t.type.indexOf("touch")&&(t=t.touches[0]||t.changedTouches[0]),{x:t.pageX,y:t.pageY}}function s(e){var n=e.getBoundingClientRect(),i=e&&e.ownerDocument,o=i.documentElement;return{top:n.top+t.pageYOffset-o.clientTop,left:n.left+t.pageXOffset-o.clientLeft,width:n.width,height:n.height}}function u(t){return/transform/i.test(t)}function h(t){var e,n={};return(t.getAttribute("style")||"").split(";").filter(function(t){return t.length}).map(function(t){e=t.split(":"),n[e[0]]=e[1]}),n}function l(t,e){var i,o="",r=h(t);for(i in r)n(r,i)&&(o+=i+":"+r[i]+";");for(i in e)n(e,i)&&(o+=i+":"+e[i]+";",u(i)&&(o+="-webkit-"+i+":"+e[i]+";"));t.style.cssText=o}function c(t){return t.map(function(t){return t.name+"("+t.value+")"}).join(" ")}function p(t,e){var i,o={},r=e||{};for(i in t)n(t,i)&&(o[i]="undefined"==typeof r[i]?t[i]:r[i]);return o}function d(t){return"none"===t?"50% 50%":t}function f(t){return/(left|right|center)/i.test(t)}function m(t){return/(top|bottom|center)/i.test(t)}function v(t,e,n){return Math.max(e,Math.min(t,n))}function g(t,e){var n=window.getComputedStyle(t),i=n.getPropertyValue("background-image"),o=0,r=i.replace(b,function(t){return 0==o?(o++,t+" 25%"):t});return r=e+"deg, "+r,"linear-gradient("+r+")"}var y=125,_=".tilt {backface-visibility:hidden;-webkit-backface-visibility: hidden;-webkit-highlight:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-transform-style:preserve-3d;transform-style:preserve-3d;-webkit-transition:-webkit-transform "+y+"ms;transition:transform "+y+"ms;overflow:hidden;position: relative;}.tilt-shadow-inner {position:absolute;opacity:0;top:0;left:0;right:0;bottom:0;z-index:9999;background:linear-gradient(rgba(0,0,0,0), rgba(0,0,0,.25))-webkit-transition:opacity "+y+"ms;transition:opacity "+y+"ms;}",w=document.createElement("style");w.type="text/css",w.appendChild(document.createTextNode(_)),document.head.appendChild(w);var b=/(transparent|rgba.+?\))/gi,x={DOWN:["touchstart","pointerdown","mousedown"],UP:["touchend","touchcancel","pointerup","mouseup","dragend"]},T={top:180,right:270,bottom:0,left:90},M=function(t,e){this._element=t,this._options=p(M.options,e),this._tapTimeout=null,this._init()};return M.options={pivot:"center",depth:15,perspective:"500px",shadow:"rgba(0,0,0,.25)"},M.prototype={handleEvent:function(t){if(!this._tapTimeout)if(i(t,x.DOWN))this._onPush(t);else{this._onLift();var e=this;clearTimeout(this._tapTimeout),this._tapTimeout=setTimeout(function(){clearTimeout(e._tapTimeout),e._tapTimeout=null},y)}},wraps:function(t){return t===this._element},_init:function(){this._options.shadow&&"none"!==this._options.pivot&&(this._element.innerHTML+='<span class="tilt-shadow-inner"></span>'),o(this._element,x.DOWN,this),this._element.dataset.tileState="ready"},_onPush:function(t){o(document,x.UP,this);var e=a(t),n=s(this._element);this.tilt(e.x-n.left,e.y-n.top)},_onLift:function(){r(document,x.UP,this),this.untilt()},tilt:function(t,e){var n,i,o,r,a,u,h,p,y,_,w,b,x,M=this._options.depth,k=this._options.pivot;b={x:f(k),y:m(k)},n=s(this._element),t="undefined"==typeof t?.5*n.width:t,e="undefined"==typeof e?.5*n.height:e,t=v(t,0,n.width)/n.width,e=v(e,0,n.height)/n.height,r=180*Math.atan2(M,n.height*("center"===k?.5:1))/Math.PI,a=180*Math.atan2(M,n.width*("center"===k?.5:1))/Math.PI,h=b.x?"left"===k?0:"right"===k?1:.5:0,p=b.y?"top"===k?0:"bottom"===k?1:.5:0,i=b.y?(e-p)*("center"===k?2:1)*-r:0,o=b.x?(h-t)*("center"===k?2:1)*-a:0,u="none"===k?1:"center"===k?2*(1-Math.sin(.5+(Math.abs(h-t)+Math.abs(p-e)))):0,y=[{name:"perspective",value:this._options.perspective},{name:"rotateX",value:i+"deg"},{name:"rotateY",value:o+"deg"},{name:"translateZ",value:u*-M+"px"}],this._options.shadow&&"none"!==k&&(w=Math.max(Math.abs(i/r),Math.abs(o/a)),x="center"===k?90+180*Math.atan2(e-p,t-h)/Math.PI:T[k],_=this._element.querySelector(".tilt-shadow-inner"),l(_,{opacity:w,background:g(_,x)})),l(this._element,{"transform-origin":d(k),transform:c(y)}),this._element.dataset.tileState="pushed"},untilt:function(){var t,e,n=this._options.pivot;this._options.shadow&&"none"!==n&&(t=this._element.querySelector(".tilt-shadow-inner"),l(t,{opacity:0})),e=[{name:"perspective",value:this._options.perspective},{name:"rotateX",value:"0"},{name:"rotateY",value:"0"},{name:"translateZ",value:"0"}],l(this._element,{"transform-origin":d(n),transform:c(e)}),this._element.dataset.tileState="released"},unload:function(){r(this._element,x.DOWN,this),this._onLift()}},M}),function(t,e,n){t&&t.addEventListener&&("undefined"!=typeof module&&module.exports?module.exports=e(t,require("./tilt")):"function"==typeof define&&define.amd?define(["./tilt"],function(n){e(t,n)}):t.InstaTilt=e(t,t.Tile))}(this,function(t,e,n){"use strict";function i(t,e){return t.getAttribute("data-tilt-"+e)}function o(t){for(var e=0,n=a.length;n>e;e++)if(a[e].element===t)return e;return-1}function r(){s.parse(document)}if(e&&Document){var a=[],s={parse:function(t){var n,r,s;for(n=t.querySelectorAll(".tilt"),s=n.length;s--;)r=n[s],-1===o(r)&&a.push({tile:new e(r,{shadow:!("false"===i(r,"shadow")),pivot:i(r,"pivot")||e.options.pivot,perspective:i(r,"perspective")||e.options.perspective,depth:parseInt(i(r,"depth"),10)||e.options.depth}),element:r})},getTileByElement:function(t){if("string"==typeof t&&(t=document.querySelector(t)),!t)return null;var e=o(t);return e?a[e].tile:null},unload:function(t){var e=o(t),n=a[e].tile;n.unload(),a.splice(e,1)}};return"loading"!==document.readyState?r():document.addEventListener("DOMContentLoaded",r),s}});